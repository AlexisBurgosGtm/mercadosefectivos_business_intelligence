(this.webpackJsonpreactesting=this.webpackJsonpreactesting||[]).push([[0],{350:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),s=a(65),o=a.n(s),i=a(24),r=a(25),l=a(52),d=a(26),u=a(27),j=a(85),b=a.n(j),h=a(58),p=a.n(h),m=a(166),O={getApiUrl:function(){return"https://mercadosefectivos-bi-api.herokuapp.com"},setMoneda:function(e,t){e=e.toString().replace(/\$|\,/g,""),isNaN(e)&&(e="0");var a=e==(e=Math.abs(e)),n=(e=Math.floor(100*e+.50000000001))%100;e=Math.floor(e/100).toString(),n<10&&(n="0"+n);for(var c=0;c<Math.floor((e.length-(1+c))/3);c++)e=e.substring(0,e.length-(4*c+3))+","+e.substring(e.length-(4*c+3));return((a?"":"-")+t+" "+e+("00"==n?"":"."+n)).toString()},setPorcentaje:function(e,t){e=e.toString().replace(/\$|\,/g,""),isNaN(e)&&(e="0");var a=e==(e=Math.abs(e)),n=(e=Math.floor(100*e+.50000000001))%100;e=Math.floor(e/100).toString(),n<10&&(n="0"+n);for(var c=0;c<Math.floor((e.length-(1+c))/3);c++)e=e.substring(0,e.length-(4*c+3))+","+e.substring(e.length-(4*c+3));return((a?"":"-")+" "+e+("00"==n?"":"."+n)).toString()+t},hablar:function(e){var t=new SpeechSynthesisUtterance(e);return window.speechSynthesis.speak(t)},FiltrarTabla:function(e,t){for(var a=document.getElementById(e),n=document.getElementById(t).value.toLowerCase(),c="",s=!1,o="",i=1;i<a.rows.length;i++){c=a.rows[i].getElementsByTagName("td"),s=!1;for(var r=0;r<c.length&&!s;r++)o=c[r].innerHTML.toLowerCase(),(0==n.length||o.indexOf(n)>-1)&&(s=!0);a.rows[i].style.display=s?"":"none"}},OcultarRows:function(e){for(var t=document.getElementById(e),a=1;a<t.rows.length;a++)a>15&&(t.rows[a].style.display="none")},ObtenerUbicacion:function(){var e=Object(m.a)(p.a.mark((function e(t,a){var n,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=document.getElementById(t),c=document.getElementById(a);try{navigator.geolocation.getCurrentPosition((function(e){n.innerText=e.coords.latitude.toString(),c.innerText=e.coords.longitude.toString()}))}catch(s){O.AvisoError(s.toString())}case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),ComboMeses:function(){return"<option value='1'>Enero</option>\n                      <option value='2'>Febrero</option>\n                      <option value='3'>Marzo</option>\n                      <option value='4'>Abril</option>\n                      <option value='5'>Mayo</option>\n                      <option value='6'>Junio</option>\n                      <option value='7'>Julio</option>\n                      <option value='8'>Agosto</option>\n                      <option value='9'>Septiembre</option>\n                      <option value='10'>Octubre</option>\n                      <option value='11'>Noviembre</option>\n                      <option value='12'>Diciembre</option>"},ComboAnio:function(){return"<option value='2017'>2017</option>\n                      <option value='2018'>2018</option>\n                      <option value='2019'>2019</option>\n                      <option value='2020'>2020</option>\n                      <option value='2021'>2021</option>\n                      <option value='2022'>2022</option>\n                      <option value='2023'>2023</option>\n                      <option value='2024'>2024</option>\n                      <option value='2025'>2025</option>\n                      <option value='2026'>2026</option>\n                      <option value='2027'>2027</option>\n                      <option value='2028'>2028</option>\n                      <option value='2029'>2029</option>\n                      <option value='2030'>2030</option>"},getFecha:function(){var e=new Date,t=e.getDate(),a=e.getUTCMonth()+1;switch(t.toString()){case"30":case"31":a=e.getMonth()+1}var n="0"+t,c="0"+a;return e.getFullYear()+"-"+(3==c.length?a:c)+"-"+(3==n.length?t:n)},devuelveFecha:function(e){var t=new Date(document.getElementById(e).value);return t.getFullYear()+"-"+(t.getUTCMonth()+1)+"-"+t.getUTCDate()},exportTableToExcel:function(e){var t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n="application/vnd.ms-excel;charset=UTF-8",c=document.getElementById(e),s=c.outerHTML.replace(/ /g,"%20");if(a=a?a+".xls":"excel_data.xlsx",t=document.createElement("a"),document.body.appendChild(t),navigator.msSaveOrOpenBlob){var o=new Blob(["ufeff",s],{type:"text/plain;charset=utf-8;"});navigator.msSaveOrOpenBlob(o,a)}else t.href="data:"+n+", "+s,t.download=a,t.click()},getHora:function(){var e=new Date,t=e.getHours(),a=e.getMinutes();return"".concat(t.toString(),":").concat(a.toString())},gotoGoogleMaps:function(e,t){window.open("https://www.google.com/maps?q=".concat(e,",").concat(t))}},v=O,f=a(2),g=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).menu=c.a.createRef(),n.state={empresas:[],menu:"circular-menu",loading:!1},n}return Object(r.a)(a,[{key:"render",value:function(){return Object(f.jsx)("div",{children:Object(f.jsxs)("h3",{className:"text-info",children:[Object(f.jsx)("i",{className:"fas fa-spinner fa-spin"})," \xa0Cargando datos..."]})})}}]),a}(n.Component),x=a(351),N=a(358),S=a(178),M=a(91),I=a(75),A=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).onLogout=function(){n.props.vista("LOGIN")},n.onGetMenu=function(e){n.props.vista(e)},n.onGetEmpresa=function(e){n.props.empnit(e),n.props.vista("ANALISIS_EMPRESA")},n.toggleMenu=function(){var e="";e="circular-menu"===n.state.menu?"circular-menu active":"circular-menu",n.setState({menu:e})},n.state={empresas:[],menu:"circular-menu",loading:!1},n}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.setState({loading:!0}),b.a.get("".concat("https://mercadosefectivos-bi-api.herokuapp.com","/getempresas")).then((function(t){var a=t.data.recordset;e.setState({empresas:a,loading:!1})})).catch((function(){e.setState({loading:!1})}))}},{key:"render",value:function(){var e=this,t=this.state.empresas;return console.log(t),1==this.state.loading?Object(f.jsx)(g,{}):Object(f.jsxs)("div",{children:[Object(f.jsx)("div",{className:"row card-deck",children:this.state.empresas.map((function(t){return Object(f.jsx)("div",{className:"col-6",children:Object(f.jsx)("div",{className:"card border-top-rounded border-bottom-rounded shadow hand p-10 mb-3 px-3 text-secondary border-secondary ",onClick:function(){e.onGetEmpresa(t.EMPNIT)},children:Object(f.jsxs)("div",{className:"card-body",children:[Object(f.jsxs)("div",{className:"row",children:[Object(f.jsx)("div",{className:"col-3",children:Object(f.jsx)("img",{src:"./favicon.png",width:"50",height:"50"})}),Object(f.jsxs)("div",{className:"col-9",children:[Object(f.jsx)("br",{}),Object(f.jsx)("h3",{className:"text-secondary",children:t.NOMBRE})]})]}),Object(f.jsxs)("div",{className:"row border-bottom border-gris",children:[Object(f.jsx)("div",{className:"col-4",children:Object(f.jsx)("label",{children:"Ventas:"})}),Object(f.jsx)("div",{className:"col-8",children:Object(f.jsx)("label",{children:Object(f.jsx)("b",{children:v.setMoneda(t.VENTAS,"Q")})})})]}),Object(f.jsxs)("div",{className:"row border-bottom border-gris",children:[Object(f.jsx)("div",{className:"col-4",children:Object(f.jsx)("label",{children:"Costo:"})}),Object(f.jsx)("div",{className:"col-8",children:Object(f.jsx)("label",{children:Object(f.jsx)("b",{children:v.setMoneda(t.COSTO,"Q")})})})]}),Object(f.jsxs)("div",{className:"row border-bottom border-gris",children:[Object(f.jsx)("div",{className:"col-4",children:Object(f.jsx)("label",{children:"Utilidad:"})}),Object(f.jsx)("div",{className:"col-6",children:Object(f.jsx)("label",{children:Object(f.jsx)("b",{children:v.setMoneda(t.UTILIDAD,"Q")})})}),Object(f.jsx)("div",{className:"col-2",children:Object(f.jsx)("label",{className:"text-danger",children:Object(f.jsx)("b",{children:v.setPorcentaje(t.MARGEN,"%")})})})]})]})})},t.EMPNIT)}))}),Object(f.jsx)(x.a,{width:"100%",height:"100%",children:Object(f.jsxs)(N.a,{width:600,height:500,children:[Object(f.jsx)(S.a,{dataKey:"VENTAS",isAnimationActive:!0,data:t,cx:200,cy:200,outerRadius:200,fill:"#8884d5",children:t.map((function(e,t){return Object(f.jsx)(M.a,{fill:"#4884d5",label:e.NOMBRE},"cell-".concat(t))}))}),Object(f.jsx)(I.a,{})]})}),Object(f.jsxs)("div",{className:this.state.menu,children:[Object(f.jsx)("a",{className:"floating-btn",onClick:function(){e.toggleMenu()},children:Object(f.jsx)("i",{className:"fas fa-plus"})}),Object(f.jsxs)("menu",{className:"items-wrapper",children:[Object(f.jsx)("a",{href:"#","data-toggle":"tooltip","data-placement":"left",title:"An\xe1lisis de Productos",className:"menu-item  fas fa-box",onClick:function(){e.onGetMenu("ANALISIS_PRODUCTOS")},children:"P"}),Object(f.jsx)("a",{href:"#","data-toggle":"tooltip","data-placement":"left",title:"An\xe1lisis de Marcas",className:"menu-item  fas fa-briefcase",onClick:function(){e.onGetMenu("ANALISIS_MARCAS")},children:"M"}),Object(f.jsx)("a",{href:"#","data-toggle":"tooltip","data-placement":"left",title:"An\xe1lisis por Municipio",className:"menu-item  fas fa-map-marker-alt",onClick:function(){e.onGetMenu("ANALISIS_MAPA")},children:"U"}),Object(f.jsx)("a",{href:"#","data-toggle":"tooltip","data-placement":"left",title:"Historial",className:"menu-item  fas fa-chart-line",onClick:function(){e.onGetMenu("ANALISIS_HISTORICO")},children:"H"})]})]})]})}}]),a}(n.Component),C=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).user=c.a.createRef(),n.pass=c.a.createRef(),n.login=n.login.bind(Object(l.a)(n)),n.state={vista:"LOGIN"},n}return Object(r.a)(a,[{key:"login",value:function(){this.setState({vista:"INICIO"})}},{key:"render",value:function(){return"LOGIN"==this.state.vista?Object(f.jsx)("div",{className:"card col-sm-12 col-md-4 col-lg-4 col-xl-3 shadow",children:Object(f.jsxs)("div",{className:"card-body",children:[Object(f.jsx)("div",{className:"form-group text-center",children:Object(f.jsx)("img",{src:"./favicon.png",width:"50",height:"50"})}),Object(f.jsxs)("div",{className:"form-group",children:[Object(f.jsx)("label",{children:"Usuario"}),Object(f.jsx)("input",{ref:this.user,type:"text",className:"form-control",placeholder:"Escriba su Usuario"})]}),Object(f.jsxs)("div",{className:"form-group",children:[Object(f.jsx)("label",{children:"Usuario"}),Object(f.jsx)("input",{ref:this.pass,type:"password",className:"form-control",placeholder:"Escriba su Contrase\xf1a",id:"txtPass"})]}),Object(f.jsx)("div",{className:"form-group",children:Object(f.jsx)("button",{className:"btn btn-info text-white shadow btn-lg",onClick:this.login,children:"Ingresar"})})]})}):Object(f.jsx)(B,{user:this.user.current.value,vista:"INICIO"})}}]),a}(n.Component),y=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).setBack=function(){n.props.vista("INICIO")},n.state={},n}return Object(r.a)(a,[{key:"render",value:function(){return Object(f.jsx)("div",{className:"circular-menu",children:Object(f.jsx)("a",{className:"floating-btn",onClick:this.setBack,children:Object(f.jsx)("i",{className:"fas fa-home"})})})}}]),a}(n.Component),w=a(355),k=a(356),E=a(183),T=a(184),R=a(186),L=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).getDataMarca=function(e,t){n.setState({chartvisible:!1,codmarca:e,desmarca:t})},n.getTblMarcas=function(){n.setState({loading:!0}),b.a.get("".concat("https://mercadosefectivos-bi-api.herokuapp.com","/getmarcas?empnit=").concat(n.props.empnit,"&anio=",2021,"&mes=",8)).then((function(e){var t=e.data.recordset;n.setState({tblMarcas:t,loading:!1})})).catch((function(){n.setState({tblMarcas:[],loading:!1})}))},n.setBack=function(){n.props.vista("INICIO")},n.state={loading:!1,chartvisible:!0,codmarca:0,desmarca:"",tblMarcas:[]},n}return Object(r.a)(a,[{key:"componentDidMount",value:function(){this.getTblMarcas()}},{key:"render",value:function(){var e=this,t=this.state.tblMarcas;return 1==this.state.chartvisible?Object(f.jsxs)("div",{children:[Object(f.jsxs)("div",{className:"row",children:[Object(f.jsxs)("div",{className:"card shadow border-top-rounded border-bottom-rounded col-sm-12 col-md-6 col-xl-6 col-lg-6",children:[Object(f.jsxs)("div",{className:"card-header",children:[Object(f.jsx)("h3",{children:"Ventas por Marca"}),Object(f.jsx)("button",{className:"btn btn-outline-secondary btn-md btn-circle",onClick:function(){e.getTblMarcas()},children:Object(f.jsx)("i",{className:"fas fa-sync"})})]}),Object(f.jsx)("div",{className:"card-body",children:Object(f.jsx)(x.a,{width:"100%",height:"100%",children:Object(f.jsxs)(w.a,{width:600,height:400,data:t,maxBarSize:15,layout:"vertical",margin:{top:5,right:5,left:5,bottom:5},label:!0,children:[Object(f.jsx)(k.a,{strokeDasharray:"1 1"}),Object(f.jsx)(E.a,{type:"number",orientation:"top"}),Object(f.jsx)(T.a,{type:"category",orientation:"left",dataKey:"DESMARCA"}),Object(f.jsx)(R.a,{dataKey:"TOTALPRECIO",fill:"#8884d8",radius:20,onClick:function(t){e.getDataMarca(t.CODMARCA,t.DESMARCA)}}),Object(f.jsx)(I.a,{})]})})})]}),Object(f.jsx)("div",{className:"card shadow border-top-rounded border-bottom-rounded col-sm-12 col-md-6 col-xl-6 col-lg-6",children:Object(f.jsx)("div",{className:"table-responsive",children:Object(f.jsxs)("table",{className:"table table-hover ",children:[Object(f.jsx)("thead",{className:"bg-secondary text-white ",children:Object(f.jsxs)("tr",{children:[Object(f.jsx)("td",{children:"Marca"}),Object(f.jsx)("td",{children:"Importe"})]})}),Object(f.jsx)("tbody",{children:t.map((function(e){return Object(f.jsxs)("tr",{children:[Object(f.jsx)("td",{children:e.DESMARCA}),Object(f.jsx)("td",{children:v.setMoneda(e.TOTALPRECIO,"Q")})]},"row-".concat(e.CODMARCA))}))})]})})})]}),Object(f.jsx)("div",{className:"",children:Object(f.jsx)(y,{vista:this.setBack})})]}):Object(f.jsxs)("div",{children:[Object(f.jsxs)("div",{className:"card shadow border-top-rounder",children:[Object(f.jsx)("div",{className:"card-header bg-info text-white",children:Object(f.jsxs)("h3",{children:["Detalle de la Marca ",this.state.desmarca]})}),Object(f.jsx)("div",{className:"card-body",children:Object(f.jsx)("button",{className:"btn btn-primary",onClick:function(){e.setState({chartvisible:!0})},children:"Regresar"})})]}),Object(f.jsx)(y,{vista:this.setBack})]})}}]),a}(n.Component),D=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).setBack=function(){n.props.vista("INICIO")},n.state={tblMarcas:[]},n}return Object(r.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return Object(f.jsxs)("div",{children:[Object(f.jsx)("h3",{children:"An\xe1lisis por Marcas"}),Object(f.jsx)(y,{vista:this.setBack})]})}}]),a}(c.a.Component),B=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).setEmpnit=function(e){n.setState({empnit:e})},n.setVista=n.setVista.bind(Object(l.a)(n)),n.state={vista:n.props.vista,empnit:n.props.empnit},n}return Object(r.a)(a,[{key:"setVista",value:function(e){console.log(e),this.setState({vista:e})}},{key:"render",value:function(){switch(this.state.vista){case"LOGIN":return Object(f.jsx)(C,{usuario:""});case"INICIO":return Object(f.jsx)(A,{usuario:this.props.user,vista:this.setVista,empnit:this.setEmpnit});case"ANALISIS_EMPRESA":return Object(f.jsx)(L,{empnit:this.state.empnit,vista:this.setVista});case"ANALISIS_PRODUCTOS":return Object(f.jsx)("h2",{children:"Navegando a PRODUCTOS"});case"ANALISIS_MARCAS":return Object(f.jsx)(D,{vista:this.setVista});case"ANALISIS_MAPA":return Object(f.jsx)("h2",{children:"'Navegando a MAPA'"});case"ANALISIS_HISTORICO":return Object(f.jsx)("h2",{children:"'Navegando a HISTORICO'"})}}}]),a}(n.Component),P=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,359)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,s=t.getLCP,o=t.getTTFB;a(e),n(e),c(e),s(e),o(e)}))};o.a.render(Object(f.jsx)(c.a.StrictMode,{children:Object(f.jsx)(B,{vista:"LOGIN"})}),document.getElementById("root")),P()}},[[350,1,2]]]);
//# sourceMappingURL=main.fe686f19.chunk.js.map